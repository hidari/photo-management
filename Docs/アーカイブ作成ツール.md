# アーカイブ作成ツール

作成した配布用ディレクトリをzip形式にアーカイブするツールです。

## 基本的な使い方

```bash
# 最新のイベントを自動検出してアーカイブ
deno task archive
```

## 実行内容

スクリプトは以下の動作をします：

1. アーカイブツールの確認（未設定の場合は自動セットアップ）
2. 最新のイベントディレクトリを自動検出
3. 配布用ディレクトリの一覧を表示
4. 確認後、各ディレクトリをzipにアーカイブ

## オプション

### イベントディレクトリを指定

```bash
deno task archive --event-dir ./path/to/20251012_アコスタATC
```

### TOMLファイルを直接指定

```bash
deno task archive --config ./path/to/directory.config.toml
```

### 利用可能なオプション

- `--event-dir`: アーカイブ対象のイベントディレクトリを指定
- `--config`: TOMLファイルのパスを指定

## アーカイブツールについて

デフォルトでは [rip](https://github.com/hidari/rip-zip) を使用します。

初回実行時に自動的にダウンロード・セットアップされます。

### 手動でセットアップする場合

```bash
deno task ensure-rip
```

### カスタムツールを使用する場合

`config.ts` の `archiveTool` にフルパスを指定してください：

```typescript
export default {
  // 既存の設定...

  archiveTool: '/usr/local/bin/zip',
} satisfies Config;
```

## トラブルシューティング

### イベントディレクトリが見つからない

`deno task dirs` でディレクトリ構造を作成してから実行してください。

### アーカイブツールのダウンロードに失敗する

ネットワーク接続を確認するか、手動でripをインストールしてください。

または、システムにインストール済みの `zip` コマンドを使用するように `config.ts` を設定してください。
