# イベント情報初期化ツール

対話的にイベント情報を入力し、`distribution.config.toml` ファイルを作成するツールです。

## 基本的な使い方

以下のコマンドを実行すると、対話的にイベント情報を入力できます：

```bash
deno task init
```

## 入力フロー

### 1. イベント情報の入力

最初にイベントの基本情報を入力します：

- **イベント日付**: YYYYMMDD形式で入力（例: 20251012）
- **イベント名**: イベントの名称を入力（例: アコスタATC）

日付は自動的にバリデーションされ、無効な日付の場合は再入力を求められます。

### 2. モデル管理

イベント情報の入力後、モデル情報を管理する画面に移ります。

以下の操作が可能です：

```
操作: [1]追加 [2]編集 [3]削除 [4]保存して終了 [5]キャンセル
```

#### [1] モデルの追加

新しいモデルを追加します。以下の情報を入力してください：

- **モデル名**: 敬称なしで入力（例: 田中花子）
- **初めての撮影ですか？**:
  - `y` または `yes` → 初回撮影（outreach: true）
  - `n` または `no` → 以前からの知り合い（outreach: false）
- **SNS URL（任意、空欄可）**:
  - モデルのSNS URLを入力（例: https://twitter.com/example）
  - 空欄の場合はSNS情報なしとして保存されます
  - 無効なURL形式の場合は警告が表示され、SNS登録がスキップされます

#### [2] モデルの編集

既存のモデル情報を編集します：

1. 現在登録されているモデルの一覧が表示されます
2. 編集したいモデルの番号を選択
3. 現在の設定が表示され、新しい値を入力（Enterで既存の値を保持）
4. SNS URLを空欄にすることで削除も可能です

#### [3] モデルの削除

モデルを削除します：

1. 現在登録されているモデルの一覧が表示されます
2. 削除したいモデルの番号を選択
3. 確認メッセージが表示されるので `y` で削除を実行

#### [4] 保存して終了

入力した内容を `distribution.config.toml` として保存します。

- モデルが1人も登録されていない場合は確認メッセージが表示されます
- 既に `distribution.config.toml` が存在する場合は以下の選択肢が表示されます：
  - `[1]上書き`: 既存ファイルを上書き
  - `[2]ユニーク名で保存`: タイムスタンプ付きのファイル名で保存（例: `distribution.config.2025-10-23T12-34-56.toml`）
  - `[3]破棄`: 保存せずに終了

#### [5] キャンセル

入力内容を破棄して終了します。確認メッセージが表示されます。

## 生成されるファイル

`distribution.config.toml` が以下のような形式で生成されます：

```toml
[[events]]
date = "20251012"
event_name = "アコスタATC"

[[events.models]]
name = "田中花子"
outreach = true
sns = "https://twitter.com/example"

[[events.models]]
name = "山田太郎"
outreach = false
```

## モデル情報の詳細

### outreach フィールド

- `true`: 初めての撮影（新規のモデル）
- `false`: 以前からの知り合い

このフィールドは配布メッセージ生成ツールで使用され、初回撮影のモデルには自己紹介を含むメッセージが、既知のモデルには簡潔なメッセージが生成されます。

### sns フィールド

- モデルのSNSアカウントURL（任意）
- 配布時の連絡先として使用されます
- 設定しない場合は省略可能です

## トラブルシューティング

### 日付のバリデーションエラー

```
⚠ 有効な日付を YYYYMMDD 形式で入力してください（例: 20251012）
```

日付は以下の条件を満たす必要があります：
- 8桁の数字
- 実在する日付（うるう年も考慮されます）

### URLバリデーションエラー

```
⚠ 無効なURLです。SNSの登録をスキップします
```

SNS URLは有効なURL形式である必要があります（例: `https://twitter.com/example`）。
無効なURLを入力した場合、SNS情報は保存されません。

### 既存ファイルの上書き確認

`distribution.config.toml` が既に存在する場合、上書き・ユニーク名での保存・破棄のいずれかを選択できます。
誤って既存の設定を上書きしないよう、必要に応じてバックアップを取ることをお勧めします。

## 次のステップ

`distribution.config.toml` の作成後、以下のコマンドでディレクトリ構造を生成できます：

```bash
deno task dirs
```

詳細は [ディレクトリ構造作成ツール](./ディレクトリ構造作成ツール.md) のドキュメントを参照してください。
