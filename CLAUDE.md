# CLAUDE.md

このファイルは、このリポジトリで作業する際にClaude Code (claude.ai/code) にガイダンスを提供します。

## プロジェクト概要

写真管理用のリポジトリです。写真家がモデルに写真を配布する際に使用するドキュメント、ツール、テンプレートを管理します。

## 開発環境

- ランタイム: Deno (TypeScript)
- パッケージマネージャー: pnpm
- リンター/フォーマッター: Biome
- GAS開発: clasp

## よく使うコマンド

### 開発用コマンド

#### Lint/Format
リポジトリルートで以下を実行:

```bash
pnpm run lint:fix
```

設定は `./biome.jsonc` を参照。

#### テスト実行
```bash
deno task test
```

### ツールの実行
denoスクリプトは`deno.json` で定義された `deno task` でリポジトリのルートから実行されることを前提としています。

## アーキテクチャ

### 設定システム
- config.example.ts: config.tsを作成するためのテンプレート
- types/config.ts: Config インターフェースのTypeScript型定義

### テンプレートシステム
このプロジェクトはテンプレートエンジンとして Eta を使用しています。

## コミットメッセージ

コミットメッセージの一行目は必ず以下の適切なConventional Commits準拠のプレフィックスを使用してください：

- `feat:` 新機能の追加
- `fix:` バグ修正
- `docs:` ドキュメントの更新・追加
- `style:` コードスタイル（フォーマット、セミコロンなど）
- `refactor:` 既存機能の挙動変更を伴わないリファクタリング
- `improve:` 既存機能の挙動変更を伴う改善
- `test:` テスト関連（追加・修正・削除）
- `chore:` その他の作業（依存関係更新、設定変更など）
- `ci:` CI/CD関連の変更
- `perf:` パフォーマンス改善
- `build:` ビルドシステムや外部依存関係の変更

### コミットメッセージ例
```
feat: React Router v7フロントエンド基盤を実装

- CSS Modules + Biome開発環境セットアップ
- Welcome画面とCloudflare Workers統合
```

## エージェント起動ルール

- 大きなコード変更（3ファイル以上、または100行以上）を完了した後は、必ずcode-reviewerエージェントを起動すること
- 複数ファイルに変更がある場合は、並列でcode-reviewerを起動すること
- セキュリティ関連のファイル（auth*, security*, credential* など）を変更した場合は、必ずsecurity-auditorエージェントを起動すること

## 必ず守ること

- コメントとドキュメントの主要言語は日本語です
- 個人情報を含む設定ファイルはコミットしてはいけません（config.tsはgitignoreされています）
- ハルシネーションを極力避けてわからないことはわからないと言ってください
- 反論があるときは指摘し、推奨案を提案してください
- コマンドを実行する際は実行前に `pwd` で現在のディレクトリを確認してからコマンドを実行してください
- このツールはクロスプラットフォーム対応なのでパス構築には `join` を使ってください
- ファイルを書き換える際、ファイルの末尾は必ず空行にしてください
- ソースコードの編集が完了したら `pnpm run lint:fix` を実行したあと `deno task test` を実行してすべてのテストを通してください
- 作業完了時にコミットメッセージだけを作って提示してください（コミットはしない）
